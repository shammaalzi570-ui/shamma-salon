<!DOCTYPE html>
<html lang="en">
<head>
    <!-- NLP & ML Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Feedback - Shamma Salon</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Feedback Specific Styles */
        .feedback-hero {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 120px 20px 80px;
            text-align: center;
            margin-top: 80px;
        }
        
        .feedback-container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 25px;
            background: #f5f5f5;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .tab.active {
            background: #c19a6b;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .metric-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .good { color: #27ae60; }
        .average { color: #f39c12; }
        .bad { color: #e74c3c; }
        
        .feedback-form {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .star-rating {
            font-size: 2rem;
            margin: 15px 0;
            color: #ddd;
            cursor: pointer;
        }
        
        .star-rating .star {
            margin: 0 5px;
            transition: color 0.3s;
        }
        
        .star-rating .star:hover,
        .star-rating .star.active,
        .star-rating .star:hover ~ .star {
            color: #ffd700;
        }
        
        .category-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .category-tag {
            padding: 8px 16px;
            background: #f0f0f0;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .category-tag:hover,
        .category-tag.active {
            background: #c19a6b;
            color: white;
        }
        
        .feedback-list {
            margin-top: 30px;
        }
        
        .feedback-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            border-left: 4px solid #ddd;
        }
        
        .feedback-item.good { border-left-color: #27ae60; }
        .feedback-item.average { border-left-color: #f39c12; }
        .feedback-item.bad { border-left-color: #e74c3c; }
        
        .feedback-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .feedback-rating {
            color: #f39c12;
            font-weight: 600;
        }
        
        .feedback-date {
            color: #999;
            font-size: 0.9rem;
        }
        
        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .alert-banner {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .alert-banner.success {
            background: #d4edda;
            border-left-color: #28a745;
        }
        
        /* AI Dashboard Styles */
        .ai-dashboard {
            padding: 20px;
            background: linear-gradient(135deg, #667eea0d 0%, #764ba20d 100%);
            border-radius: 20px;
        }
        
        .ai-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .ai-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        
        .ai-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }
        
        .ai-card.full-width {
            grid-column: 1 / -1;
        }
        
        .ai-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        .ai-card h3 i {
            color: #c19a6b;
        }
        
        .gauge {
            height: 100px;
            background: linear-gradient(to right, #e74c3c, #f39c12, #27ae60);
            border-radius: 10px;
            position: relative;
            margin: 20px 0;
        }
        
        .gauge-indicator {
            width: 6px;
            height: 120%;
            background: white;
            position: absolute;
            top: -10%;
            border-radius: 3px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            transition: left 0.5s ease;
        }
        
        .problem-tag {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin: 3px;
            font-weight: 600;
        }
        
        .problem-tag.urgent { background: #e74c3c; color: white; }
        .problem-tag.high { background: #f39c12; color: white; }
        .problem-tag.medium { background: #3498db; color: white; }
        .problem-tag.low { background: #95a5a6; color: white; }
        
        .keyword-item {
            display: inline-block;
            padding: 8px 18px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 25px;
            color: #2c3e50;
            transition: all 0.3s;
            cursor: pointer;
            margin: 5px;
        }
        
        .keyword-item:hover {
            background: linear-gradient(135deg, #c19a6b, #a87c4a);
            color: white;
            transform: scale(1.1);
        }
        
        .recommendation-item {
            background: #f8f9fa;
            border-left: 4px solid #27ae60;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 0 10px 10px 0;
            transition: all 0.3s;
        }
        
        .recommendation-item.high { border-left-color: #e74c3c; }
        .recommendation-item.medium { border-left-color: #f39c12; }
        
        .personality-badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 0.95rem;
            font-weight: 600;
            margin: 5px;
        }
        
        .personality-expressive { background: linear-gradient(135deg, #ffeaa5, #fdcb6e); color: #6b4f1f; }
        .personality-polite { background: linear-gradient(135deg, #a8e6cf, #6ab04c); color: #1d4a3e; }
        .personality-analytical { background: linear-gradient(135deg, #b2bec3, #636e72); color: #2d3436; }
        
        @media (max-width: 768px) {
            .tabs {
                flex-wrap: wrap;
            }
            .tab {
                flex: 1 1 calc(50% - 10px);
                text-align: center;
            }
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .ai-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <h1><i class="fas fa-crown"></i> SHAMMA SALON</h1>
                    <p class="tagline">Customer Feedback System</p>
                </div>
                
                <ul class="nav-menu">
                    <li><a href="index.html" class="nav-link"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="index.html#services" class="nav-link"><i class="fas fa-spa"></i> Services</a></li>
                    <li><a href="index.html#contact" class="nav-link"><i class="fas fa-phone"></i> Contact</a></li>
                    <li><a href="feedback.html" class="nav-link active"><i class="fas fa-comments"></i> Feedback</a></li>
                    <li><a href="admin.html" class="nav-link admin-link"><i class="fas fa-chart-line"></i> Admin</a></li>
                </ul>
                
                <div class="hamburger" id="hamburger">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="feedback-hero">
        <div class="container">
            <h1><i class="fas fa-comments"></i> Customer Feedback</h1>
            <p>Your opinion helps us improve our services</p>
        </div>
    </section>

    <!-- Main Content -->
    <div class="feedback-container">
        <!-- Tabs -->
        <div class="tabs">
            <div class="tab active" onclick="showTab('submit')">
                <i class="fas fa-edit"></i> Submit Feedback
            </div>
            <div class="tab" onclick="showTab('dashboard')">
                <i class="fas fa-chart-bar"></i> Dashboard
            </div>
            <div class="tab" onclick="showTab('reports')">
                <i class="fas fa-file-alt"></i> Reports
            </div>
            <div class="tab" onclick="showTab('aiInsights')">
                <i class="fas fa-brain"></i> AI Insights
            </div>
        </div>

        <!-- Submit Feedback Tab -->
        <div id="submitTab" class="tab-content active">
            <div class="feedback-form">
                <h2>Share Your Experience</h2>
                <p>We value your feedback to improve our services</p>
                
                <form id="feedbackForm">
                    <div class="form-group">
                        <label>Your Name (Optional)</label>
                        <input type="text" id="feedbackName" class="form-control" placeholder="Enter your name">
                    </div>
                    
                    <div class="form-group">
                        <label>Overall Rating</label>
                        <div class="star-rating" id="starRating">
                            <span class="star" data-value="1">â˜…</span>
                            <span class="star" data-value="2">â˜…</span>
                            <span class="star" data-value="3">â˜…</span>
                            <span class="star" data-value="4">â˜…</span>
                            <span class="star" data-value="5">â˜…</span>
                        </div>
                        <input type="hidden" id="ratingValue" value="0">
                    </div>
                    
                    <div class="form-group">
                        <label>Service Category</label>
                        <div class="category-tags">
                            <span class="category-tag" data-category="hair">Hair Services</span>
                            <span class="category-tag" data-category="nails">Nail Services</span>
                            <span class="category-tag" data-category="makeup">Makeup</span>
                            <span class="category-tag" data-category="skincare">Skincare</span>
                            <span class="category-tag" data-category="waxing">Hair Removal</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Feedback Type</label>
                        <div class="category-tags">
                            <span class="category-tag" data-type="price">Price/Value</span>
                            <span class="category-tag" data-type="quality">Service Quality</span>
                            <span class="category-tag" data-type="staff">Staff</span>
                            <span class="category-tag" data-type="cleanliness">Cleanliness</span>
                            <span class="category-tag" data-type="waiting">Waiting Time</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Your Feedback *</label>
                        <textarea id="feedbackText" class="form-control" rows="5" placeholder="Please share your experience..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Suggestions for Improvement (Optional)</label>
                        <textarea id="suggestions" class="form-control" rows="3" placeholder="Your suggestions..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px;">
                        <i class="fas fa-paper-plane"></i> Submit Feedback
                    </button>
                </form>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboardTab" class="tab-content">
            <div class="dashboard-grid">
                <div class="metric-card">
                    <h3>Total Feedback</h3>
                    <div class="metric-value" id="totalFeedback">0</div>
                    <p>All received feedback</p>
                </div>
                
                <div class="metric-card">
                    <h3>Positive</h3>
                    <div class="metric-value good" id="goodFeedback">0</div>
                    <p>4-5 star ratings</p>
                </div>
                
                <div class="metric-card">
                    <h3>Average</h3>
                    <div class="metric-value average" id="averageFeedback">0</div>
                    <p>3 star ratings</p>
                </div>
                
                <div class="metric-card">
                    <h3>Negative</h3>
                    <div class="metric-value bad" id="badFeedback">0</div>
                    <p>1-2 star ratings</p>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>Recent Feedback</h3>
                <div id="recentFeedbackList"></div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reportsTab" class="tab-content">
            <div class="chart-container">
                <h3>Feedback Analysis</h3>
                <div id="analysisResults">
                    <p>Loading analysis data...</p>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>Common Issues</h3>
                <div id="commonIssues"></div>
            </div>
        </div>

        <!-- AI Insights Tab -->
        <div id="aiInsightsTab" class="tab-content">
            <div class="ai-dashboard">
                <h2><i class="fas fa-robot"></i> AI-Powered Customer Insights</h2>
                <p style="color: #666; margin-bottom: 30px;">Real-time sentiment analysis and problem detection using NLP & Machine Learning</p>
                
                <div class="ai-grid">
                    <!-- Sentiment Analysis Card -->
                    <div class="ai-card">
                        <h3><i class="fas fa-smile"></i> Sentiment Analysis</h3>
                        <div class="gauge" id="sentimentGauge">
                            <div id="gaugeIndicator" class="gauge-indicator" style="left: 50%;"></div>
                        </div>
                        <div id="sentimentDetails" style="text-align: center;">
                            <span style="font-size: 1.5rem; font-weight: bold; color: #3498db;">Analyzing...</span>
                        </div>
                    </div>
                    
                    <!-- Problem Detection Card -->
                    <div class="ai-card">
                        <h3><i class="fas fa-exclamation-triangle"></i> Problem Detection</h3>
                        <div id="problemList" style="min-height: 150px;">
                            <p style="color: #666; text-align: center;">Loading AI analysis...</p>
                        </div>
                    </div>
                    
                    <!-- Trend Prediction Card -->
                    <div class="ai-card">
                        <h3><i class="fas fa-chart-line"></i> Trend Prediction</h3>
                        <canvas id="trendChart" style="height: 150px; width: 100%;"></canvas>
                    </div>
                    
                    <!-- Smart Recommendations Card -->
                    <div class="ai-card">
                        <h3><i class="fas fa-lightbulb"></i> Smart Recommendations</h3>
                        <div id="smartRecommendations" style="min-height: 150px;">
                            <p style="color: #666; text-align: center;">Generating insights...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Customer Personality Card -->
                <div class="ai-card full-width" style="margin-top: 20px;">
                    <h3><i class="fas fa-users"></i> Customer Personality Insights</h3>
                    <div id="personalityInsights" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; padding: 15px;">
                        <p style="color: #666; text-align: center; grid-column: 1/-1;">Waiting for customer feedback...</p>
                    </div>
                </div>
                
                <!-- Keyword Cloud Card -->
                <div class="ai-card full-width" style="margin-top: 20px;">
                    <h3><i class="fas fa-tags"></i> AI-Generated Keyword Cloud</h3>
                    <div id="aiKeywordCloud" style="display: flex; flex-wrap: wrap; gap: 15px; padding: 20px; justify-content: center; min-height: 150px;">
                        <p style="color: #666;">Analyzing keywords from feedback...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 SHAMMA SALON - Feedback System</p>
                <p>Email: 202111205@gcet.edu.om | Phone: +968 9113 9659</p>
            </div>
        </div>
    </footer>

    <script>
        // ============================================
        // ðŸ§  SHAMMA SALON - ADVANCED NLP & ML ANALYTICS
        // ============================================

        // ===== AI Analyzer Class =====
        class AIFeedbackAnalyzer {
            constructor() {
                this.model = null;
                this.sentimentData = [];
                this.customerProfiles = {};
                console.log('ðŸ¤– AI Analyzer initialized');
            }

            // ðŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
            analyzeSentiment(text) {
                if (!text) return null;
                
                const cleanText = text.toLowerCase().replace(/[^\w\s\u0600-\u06FF]/g, ' ');
                const words = cleanText.split(' ').filter(w => w.length > 0);
                
                // Ù‚ÙˆØ§Ù…ÙŠØ³ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±
                const positiveWords = [
                    'excellent', 'great', 'amazing', 'wonderful', 'fantastic', 'perfect', 
                    'love', 'happy', 'satisfied', 'professional', 'clean', 'friendly',
                    'Ù…Ù…ØªØ§Ø²', 'Ø±Ø§Ø¦Ø¹', 'Ø¬Ù…ÙŠÙ„', 'Ø³Ø¹ÙŠØ¯', 'Ø±Ø§Ø¶', 'Ø§Ø­ØªØ±Ø§ÙÙŠ', 'Ù†Ø¸ÙŠÙ', 'ÙˆØ¯ÙˆØ¯'
                ];
                
                const negativeWords = [
                    'bad', 'poor', 'terrible', 'awful', 'horrible', 'disappointed',
                    'worst', 'unprofessional', 'dirty', 'rude', 'expensive', 'slow',
                    'Ø³ÙŠØ¡', 'ÙØ¸ÙŠØ¹', 'Ù…Ø®ÙŠØ¨', 'Ù‚Ø°Ø±', 'ÙˆÙ‚Ø­', 'ØºØ§Ù„ÙŠ', 'Ø¨Ø·ÙŠØ¡'
                ];
                
                let score = 0;
                let positiveCount = 0;
                let negativeCount = 0;
                let foundWords = [];
                
                words.forEach(word => {
                    if (positiveWords.includes(word)) {
                        score += 1;
                        positiveCount++;
                        foundWords.push(word);
                    }
                    if (negativeWords.includes(word)) {
                        score -= 1;
                        negativeCount++;
                        foundWords.push(word);
                    }
                });
                
                // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±
                let sentiment = 'neutral';
                if (score > 2) sentiment = 'very_positive';
                else if (score > 0) sentiment = 'positive';
                else if (score < -2) sentiment = 'very_negative';
                else if (score < 0) sentiment = 'negative';
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø«Ù‚Ø© ÙˆØ§Ù„Ø´Ø¯Ø©
                const totalMatches = positiveCount + negativeCount;
                const confidence = totalMatches > 0 ? Math.min(1, totalMatches / 5) : 0.3;
                const intensity = words.length > 0 ? Math.abs(score) / words.length : 0;
                
                return {
                    score,
                    normalizedScore: ((score + 5) / 10) * 100,
                    sentiment,
                    confidence,
                    intensity,
                    positiveCount,
                    negativeCount,
                    foundWords: [...new Set(foundWords)]
                };
            }

            // ðŸŽ¯ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©
            extractKeywords(text) {
                if (!text) return [];
                
                const cleanText = text.toLowerCase().replace(/[^\w\s\u0600-\u06FF]/g, '');
                const words = cleanText.split(' ').filter(w => w.length > 3);
                
                const stopWords = ['the', 'and', 'for', 'that', 'this', 'with', 'was', 'were', 
                                  'have', 'has', 'had', 'very', 'really', 'such', 'just', 'from',
                                  'Ù‡Ø°Ø§', 'Ù‡Ø°Ù‡', 'ÙƒØ§Ù†', 'Ù…Ø¹', 'Ø¹Ù„Ù‰', 'Ø§Ù„Ù‰', 'Ù…Ù†'];
                
                const frequency = {};
                words.forEach(word => {
                    if (!stopWords.includes(word)) {
                        frequency[word] = (frequency[word] || 0) + 1;
                    }
                });
                
                return Object.entries(frequency)
                    .map(([word, count]) => ({
                        word,
                        count,
                        score: count * (text.indexOf(word) < 30 ? 2 : 1)
                    }))
                    .sort((a, b) => b.score - a.score)
                    .slice(0, 15);
            }

            // âš ï¸ ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„
            classifyProblems(text, sentiment) {
                if (!text) return [];
                
                const textLower = text.toLowerCase();
                const problems = [];
                
                const problemPatterns = {
                    price: {
                        keywords: ['expensive', 'price', 'cost', 'money', 'high', 'ØºØ§Ù„ÙŠ', 'Ø³Ø¹Ø±', 'ØªÙƒÙ„ÙØ©'],
                        weight: 1.5,
                        suggestions: ['Offer package deals', 'Create loyalty discounts', 'Seasonal promotions']
                    },
                    quality: {
                        keywords: ['quality', 'bad', 'poor', 'not good', 'worst', 'Ø¬ÙˆØ¯Ø©', 'Ø±Ø¯ÙŠØ¡', 'Ø³ÙŠØ¡'],
                        weight: 2.0,
                        suggestions: ['Staff training', 'Quality control checks', 'Premium product upgrade']
                    },
                    staff: {
                        keywords: ['staff', 'employee', 'worker', 'rude', 'unfriendly', 'Ù…ÙˆØ¸Ù', 'Ø¹Ø§Ù…Ù„', 'ÙˆÙ‚Ø­'],
                        weight: 2.5,
                        suggestions: ['Customer service training', 'Staff motivation program', 'Performance reviews']
                    },
                    cleanliness: {
                        keywords: ['clean', 'dirty', 'cleanliness', 'hygiene', 'Ù†Ø¸Ø§ÙØ©', 'ÙˆØ³Ø®', 'Ù‚Ø°Ø±'],
                        weight: 2.0,
                        suggestions: ['Deep cleaning schedule', 'Hygiene checklist', 'Regular inspections']
                    },
                    waiting: {
                        keywords: ['wait', 'waiting', 'time', 'long', 'slow', 'delay', 'Ø§Ù†ØªØ¸Ø§Ø±', 'Ø¨Ø·ÙŠØ¡'],
                        weight: 1.8,
                        suggestions: ['Optimize appointment scheduling', 'Add more staff', 'Reduce service time']
                    }
                };
                
                Object.entries(problemPatterns).forEach(([problem, config]) => {
                    const matches = config.keywords.filter(keyword => 
                        textLower.includes(keyword.toLowerCase())
                    );
                    
                    if (matches.length > 0) {
                        const confidence = Math.min(1, (matches.length * config.weight) / text.length);
                        let severity = 'low';
                        if (confidence > 0.7 || sentiment?.score < -2) severity = 'critical';
                        else if (confidence > 0.5) severity = 'high';
                        else if (confidence > 0.3) severity = 'medium';
                        
                        problems.push({
                            category: problem,
                            confidence: parseFloat(confidence.toFixed(2)),
                            severity,
                            matches,
                            suggestions: config.suggestions,
                            priority: this.getPriority(severity, confidence)
                        });
                    }
                });
                
                return problems.sort((a, b) => b.confidence - a.confidence);
            }

            // ðŸ‘¤ ØªØ­Ù„ÙŠÙ„ Ø´Ø®ØµÙŠØ© Ø§Ù„Ø¹Ù…ÙŠÙ„
            analyzePersonality(feedback) {
                if (!feedback) return null;
                
                const text = feedback.text?.toLowerCase() || '';
                
                // ØªØ­Ù„ÙŠÙ„ Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªÙˆØ§ØµÙ„
                let communicationStyle = 'neutral';
                if (text.includes('!') || text.includes('very') || text.includes('really')) {
                    communicationStyle = 'expressive';
                } else if (text.includes('please') || text.includes('thank') || text.includes('kindly')) {
                    communicationStyle = 'polite';
                } else if (text.split(' ').length > 30) {
                    communicationStyle = 'detailed';
                }
                
                // ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª
                let expectations = 'moderate';
                if (feedback.rating >= 4) {
                    expectations = 'satisfied';
                } else if (feedback.rating === 3) {
                    expectations = 'neutral';
                } else {
                    expectations = 'demanding';
                }
                
                // ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙˆÙ„Ø§Ø¡
                let loyalty = 'new';
                const previousFeedbacks = window.feedbackData?.filter(f => 
                    f.name === feedback.name && f.id !== feedback.id
                ) || [];
                
                if (previousFeedbacks.length >= 3) {
                    loyalty = 'loyal';
                } else if (previousFeedbacks.length >= 1) {
                    loyalty = 'regular';
                }
                
                return {
                    communicationStyle,
                    expectations,
                    loyalty,
                    isFirstTime: previousFeedbacks.length === 0
                };
            }

            // ðŸš¦ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
            getPriority(severity, confidence) {
                if (severity === 'critical' || confidence > 0.8) return 'urgent';
                if (severity === 'high' || confidence > 0.6) return 'high';
                if (confidence > 0.4) return 'medium';
                return 'low';
            }

            // ðŸ“ˆ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª
            analyzeTrends(feedbackHistory) {
                if (!feedbackHistory || feedbackHistory.length < 2) {
                    return null;
                }
                
                const recent = feedbackHistory.slice(-5);
                const ratings = recent.map(f => f.rating);
                const avgRating = ratings.reduce((a, b) => a + b, 0) / ratings.length;
                
                let prediction = avgRating;
                if (recent.length >= 3) {
                    const lastTwo = recent.slice(-2);
                    const change = lastTwo[1].rating - lastTwo[0].rating;
                    prediction = avgRating + (change * 0.5);
                }
                
                return {
                    averageRating: parseFloat(avgRating.toFixed(1)),
                    predictedRating: parseFloat(Math.min(5, Math.max(1, prediction)).toFixed(1)),
                    totalFeedbacks: feedbackHistory.length,
                    recentCount: recent.length,
                    trend: prediction > avgRating ? 'improving' : prediction < avgRating ? 'declining' : 'stable'
                };
            }

            // ðŸ’¡ ØªÙˆÙ„ÙŠØ¯ ØªÙˆØµÙŠØ§Øª Ø°ÙƒÙŠØ©
            generateRecommendations(problems, sentiment, trends) {
                const recommendations = [];
                
                problems.forEach(problem => {
                    if (problem.confidence > 0.4) {
                        recommendations.push({
                            text: problem.suggestions[0],
                            category: problem.category,
                            priority: problem.priority,
                            confidence: problem.confidence
                        });
                    }
                });
                
                if (sentiment?.score < -2) {
                    recommendations.push({
                        text: 'Contact customer immediately to resolve issues',
                        category: 'customer_service',
                        priority: 'urgent',
                        confidence: 0.9
                    });
                }
                
                if (trends?.trend === 'declining') {
                    recommendations.push({
                        text: 'Conduct customer satisfaction survey',
                        category: 'feedback',
                        priority: 'high',
                        confidence: 0.75
                    });
                }
                
                return recommendations.slice(0, 5);
            }
        }

        // ===== Initialize System =====
        const aiAnalyzer = new AIFeedbackAnalyzer();
        window.aiAnalyzer = aiAnalyzer;

        // ===== Feedback System =====
        let feedbackData = [];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸ“Š Feedback system loading...');
            loadFeedbackData();
            setupEventListeners();
            setupMobileMenu();
            showTab('submit');
            
            // ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© AI
            setTimeout(updateAIDashboard, 1000);
            setInterval(updateAIDashboard, 5000);
        });

        // Mobile menu
        function setupMobileMenu() {
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.querySelector('.nav-menu');
            
            if (hamburger && navMenu) {
                hamburger.addEventListener('click', function() {
                    this.classList.toggle('active');
                    navMenu.classList.toggle('active');
                });
            }
        }

        // Load feedback data
        function loadFeedbackData() {
            const saved = localStorage.getItem('shammaFeedback');
            feedbackData = saved ? JSON.parse(saved) : [];
            
            if (feedbackData.length === 0) {
                // Sample data
                feedbackData = [
                    {
                        id: 1,
                        name: "Fatima Al-Said",
                        rating: 5,
                        category: "hair",
                        types: ["quality"],
                        text: "Excellent service! Very professional staff.",
                        date: "2024-01-03",
                        status: "good"
                    },
                    {
                        id: 2,
                        name: "Ali Al-Maamari",
                        rating: 3,
                        category: "nails",
                        types: ["price", "waiting"],
                        text: "Good service but a bit expensive and had to wait long.",
                        date: "2024-01-02",
                        status: "average"
                    }
                ];
                saveFeedbackData();
            }
            
            updateDashboard();
        }

        // Save feedback data
        function saveFeedbackData() {
            localStorage.setItem('shammaFeedback', JSON.stringify(feedbackData));
        }

        // Setup event listeners
        function setupEventListeners() {
            // Star rating
            document.querySelectorAll('.star').forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.getAttribute('data-value'));
                    setRating(rating);
                });
            });
            
            // Category tags
            document.querySelectorAll('.category-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    this.classList.toggle('active');
                });
            });
            
            // Form submission
            const form = document.getElementById('feedbackForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    submitFeedback();
                });
            }
        }

        // Set star rating
        function setRating(rating) {
            document.getElementById('ratingValue').value = rating;
            document.querySelectorAll('.star').forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // Submit feedback
        function submitFeedback() {
            const rating = parseInt(document.getElementById('ratingValue').value);
            const text = document.getElementById('feedbackText').value.trim();
            
            if (rating === 0) {
                alert('Please select a rating');
                return;
            }
            
            if (!text) {
                alert('Please enter your feedback');
                return;
            }
            
            // Determine status
            let status = 'average';
            if (rating >= 4) status = 'good';
            else if (rating <= 2) status = 'bad';
            
            // Get selected categories and types
            const categories = Array.from(document.querySelectorAll('[data-category].active'))
                .map(tag => tag.getAttribute('data-category'));
            const types = Array.from(document.querySelectorAll('[data-type].active'))
                .map(tag => tag.getAttribute('data-type'));
            
            // Create feedback object
            const feedback = {
                id: Date.now(),
                name: document.getElementById('feedbackName').value.trim() || 'Anonymous',
                rating: rating,
                category: categories[0] || 'general',
                types: types,
                text: text,
                suggestions: document.getElementById('suggestions').value.trim(),
                date: new Date().toISOString().split('T')[0],
                status: status,
                timestamp: new Date().toISOString()
            };
            
            // AI Analysis
            const sentiment = aiAnalyzer.analyzeSentiment(feedback.text);
            const keywords = aiAnalyzer.extractKeywords(feedback.text);
            const problems = aiAnalyzer.classifyProblems(feedback.text, sentiment);
            const personality = aiAnalyzer.analyzePersonality(feedback);
            
            feedback.aiAnalysis = {
                sentiment,
                keywords,
                problems,
                personality,
                analyzedAt: new Date().toISOString()
            };
            
            // Add to data
            feedbackData.unshift(feedback);
            saveFeedbackData();
            
            // Show success
            alert('Thank you for your feedback! We appreciate your input.');
            
            // Reset form
            document.getElementById('feedbackForm').reset();
            document.querySelectorAll('.star, .category-tag').forEach(el => {
                el.classList.remove('active');
            });
            document.getElementById('ratingValue').value = 0;
            
            // Update dashboards
            updateDashboard();
            updateAIDashboard();
            
            // Show success banner
            showAlert('Feedback submitted successfully!', 'success');
        }

        // Update dashboard
        function updateDashboard() {
            if (feedbackData.length === 0) return;
            
            const good = feedbackData.filter(f => f.status === 'good').length;
            const average = feedbackData.filter(f => f.status === 'average').length;
            const bad = feedbackData.filter(f => f.status === 'bad').length;
            
            document.getElementById('totalFeedback').textContent = feedbackData.length;
            document.getElementById('goodFeedback').textContent = good;
            document.getElementById('averageFeedback').textContent = average;
            document.getElementById('badFeedback').textContent = bad;
            
            showRecentFeedback();
            updateAnalysis();
        }

        // Show recent feedback
        function showRecentFeedback() {
            const container = document.getElementById('recentFeedbackList');
            if (!container) return;
            
            const recent = feedbackData.slice(0, 5);
            container.innerHTML = '';
            
            recent.forEach(feedback => {
                const div = document.createElement('div');
                div.className = `feedback-item ${feedback.status}`;
                
                div.innerHTML = `
                    <div class="feedback-header">
                        <div>
                            <strong>${feedback.name}</strong>
                            <span class="feedback-rating">
                                ${'â˜…'.repeat(feedback.rating)}${'â˜†'.repeat(5 - feedback.rating)}
                            </span>
                        </div>
                        <div class="feedback-date">${feedback.date}</div>
                    </div>
                    <p>${feedback.text}</p>
                    ${feedback.types && feedback.types.length > 0 ? 
                        `<small>Tags: ${feedback.types.join(', ')}</small>` : ''}
                `;
                
                container.appendChild(div);
            });
        }

        // Update analysis
        function updateAnalysis() {
            const analysisDiv = document.getElementById('analysisResults');
            const issuesDiv = document.getElementById('commonIssues');
            
            if (!analysisDiv && !issuesDiv) return;
            
            const totalRating = feedbackData.reduce((sum, f) => sum + f.rating, 0);
            const avgRating = (totalRating / feedbackData.length).toFixed(1);
            
            const issueCounts = {};
            feedbackData.forEach(f => {
                f.types && f.types.forEach(type => {
                    issueCounts[type] = (issueCounts[type] || 0) + 1;
                });
            });
            
            if (analysisDiv) {
                const positiveRate = ((feedbackData.filter(f => f.status === 'good').length / feedbackData.length) * 100).toFixed(1);
                analysisDiv.innerHTML = `
                    <p><strong>Average Rating:</strong> ${avgRating} / 5</p>
                    <p><strong>Total Responses:</strong> ${feedbackData.length}</p>
                    <p><strong>Positive Rate:</strong> ${positiveRate}%</p>
                `;
            }
            
            if (issuesDiv && Object.keys(issueCounts).length > 0) {
                issuesDiv.innerHTML = Object.entries(issueCounts)
                    .map(([issue, count]) => `
                        <div style="margin: 10px 0;">
                            <div style="display: flex; justify-content: space-between;">
                                <span>${issue}</span>
                                <span>${count}</span>
                            </div>
                            <div style="background: #eee; height: 10px; border-radius: 5px; margin-top: 5px;">
                                <div style="background: #c19a6b; width: ${(count / feedbackData.length) * 100}%; height: 100%; border-radius: 5px;"></div>
                            </div>
                        </div>
                    `).join('');
            }
        }

        // ===== AI Dashboard Functions =====
        function updateAIDashboard() {
            if (feedbackData.length === 0) return;
            
            // ØªØ­Ù„ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const analyzedData = feedbackData.map(f => {
                if (!f.aiAnalysis) {
                    f.aiAnalysis = {
                        sentiment: aiAnalyzer.analyzeSentiment(f.text),
                        keywords: aiAnalyzer.extractKeywords(f.text),
                        problems: aiAnalyzer.classifyProblems(f.text, null),
                        personality: aiAnalyzer.analyzePersonality(f)
                    };
                }
                return f;
            });
            
            saveFeedbackData();
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø± Ø§Ù„Ù…Ø´Ø§Ø¹Ø±
            const avgSentiment = analyzedData.reduce((sum, f) => 
                sum + (f.aiAnalysis?.sentiment?.score || 0), 0) / analyzedData.length;
            
            const gaugeIndicator = document.getElementById('gaugeIndicator');
            if (gaugeIndicator) {
                const position = ((avgSentiment + 5) / 10) * 100;
                gaugeIndicator.style.left = `${Math.max(0, Math.min(100, position))}%`;
            }
            
            // ØªØ­Ø¯ÙŠØ« ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±
            const sentimentDetails = document.getElementById('sentimentDetails');
            if (sentimentDetails) {
                const positive = analyzedData.filter(f => 
                    f.aiAnalysis?.sentiment?.sentiment?.includes('positive')).length;
                const positivePercent = ((positive / analyzedData.length) * 100).toFixed(1);
                
                let sentimentText = 'ðŸ˜ Average';
                let sentimentColor = '#f39c12';
                
                if (avgSentiment > 1) {
                    sentimentText = 'ðŸ˜Š Excellent';
                    sentimentColor = '#27ae60';
                } else if (avgSentiment > 0) {
                    sentimentText = 'ðŸ™‚ Good';
                    sentimentColor = '#2ecc71';
                } else if (avgSentiment < -1) {
                    sentimentText = 'ðŸ˜ž Poor';
                    sentimentColor = '#e74c3c';
                }
                
                sentimentDetails.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="font-size: 1.3rem; font-weight: bold; color: ${sentimentColor}">
                            ${sentimentText}
                        </span>
                        <span style="font-size: 1.1rem; color: #666;">
                            ${positivePercent}% Positive
                        </span>
                    </div>
                `;
            }
            
            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§ÙƒÙ„
            const problemList = document.getElementById('problemList');
            if (problemList) {
                const allProblems = analyzedData.flatMap(f => f.aiAnalysis?.problems || []);
                const uniqueProblems = {};
                
                allProblems.forEach(p => {
                    if (!uniqueProblems[p.category]) {
                        uniqueProblems[p.category] = {
                            count: 0,
                            severity: p.severity,
                            suggestions: p.suggestions
                        };
                    }
                    uniqueProblems[p.category].count++;
                });
                
                if (Object.keys(uniqueProblems).length === 0) {
                    problemList.innerHTML = '<p style="color: #27ae60; text-align: center;">âœ… No major problems detected</p>';
                } else {
                    problemList.innerHTML = Object.entries(uniqueProblems)
                        .map(([category, data]) => `
                            <div style="margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                    <span style="font-weight: bold; text-transform: capitalize;">${category}</span>
                                    <span class="problem-tag ${data.severity}">${data.count} cases</span>
                                </div>
                                <small style="color: #666;">${data.suggestions[0]}</small>
                            </div>
                        `).join('');
                }
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©
            const keywordCloud = document.getElementById('aiKeywordCloud');
            if (keywordCloud) {
                const allKeywords = analyzedData.flatMap(f => f.aiAnalysis?.keywords || []);
                const keywordMap = {};
                
                allKeywords.forEach(k => {
                    keywordMap[k.word] = (keywordMap[k.word] || 0) + k.count;
                });
                
                const topKeywords = Object.entries(keywordMap)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 20);
                
                if (topKeywords.length === 0) {
                    keywordCloud.innerHTML = '<p style="color: #666;">No keywords available</p>';
                } else {
                    keywordCloud.innerHTML = topKeywords
                        .map(([word, count]) => {
                            const size = Math.min(30, Math.max(14, 14 + count * 2));
                            return `<span class="keyword-item" style="font-size: ${size}px;">${word}</span>`;
                        })
                        .join('');
                }
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆØµÙŠØ§Øª
            const recommendationsDiv = document.getElementById('smartRecommendations');
            if (recommendationsDiv) {
                const allProblems = analyzedData.flatMap(f => f.aiAnalysis?.problems || []);
                const trends = aiAnalyzer.analyzeTrends(analyzedData);
                const avgSent = { score: avgSentiment };
                
                const recommendations = aiAnalyzer.generateRecommendations(allProblems, avgSent, trends);
                
                if (recommendations.length === 0) {
                    recommendationsDiv.innerHTML = '<p style="color: #27ae60; text-align: center;">âœ… Everything looks good!</p>';
                } else {
                    recommendationsDiv.innerHTML = recommendations
                        .map(rec => `
                            <div class="recommendation-item ${rec.priority}">
                                <strong>${rec.text}</strong>
                                <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                                    <small style="color: #666; text-transform: capitalize;">${rec.category}</small>
                                    <span class="problem-tag ${rec.priority}">${rec.priority}</span>
                                </div>
                            </div>
                        `).join('');
                }
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø®ØµÙŠØ§Øª
            const personalityDiv = document.getElementById('personalityInsights');
            if (personalityDiv) {
                const personalities = analyzedData
                    .map(f => f.aiAnalysis?.personality)
                    .filter(p => p);
                
                const communicationStyles = {
                    expressive: personalities.filter(p => p?.communicationStyle === 'expressive').length,
                    polite: personalities.filter(p => p?.communicationStyle === 'polite').length,
                    detailed: personalities.filter(p => p?.communicationStyle === 'detailed').length,
                    neutral: personalities.filter(p => p?.communicationStyle === 'neutral').length
                };
                
                const loyalCustomers = personalities.filter(p => p?.loyalty === 'loyal').length;
                const firstTimeCustomers = personalities.filter(p => p?.isFirstTime).length;
                
                personalityDiv.innerHTML = `
                    <div class="personality-badge personality-expressive">
                        ðŸŽ­ Expressive: ${communicationStyles.expressive}
                    </div>
                    <div class="personality-badge personality-polite">
                        ðŸ˜Š Polite: ${communicationStyles.polite}
                    </div>
                    <div class="personality-badge personality-analytical">
                        ðŸ“ Detailed: ${communicationStyles.detailed}
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; grid-column: 1/-1;">
                        <div style="display: flex; justify-content: space-around;">
                            <div style="text-align: center;">
                                <span style="display: block; font-size: 1.3rem; font-weight: bold; color: #c19a6b;">${loyalCustomers}</span>
                                <span style="color: #666;">Loyal Customers</span>
                            </div>
                            <div style="text-align: center;">
                                <span style="display: block; font-size: 1.3rem; font-weight: bold; color: #3498db;">${firstTimeCustomers}</span>
                                <span style="color: #666;">First Time</span>
                            </div>
                            <div style="text-align: center;">
                                <span style="display: block; font-size: 1.3rem; font-weight: bold; color: #95a5a6;">${personalities.length}</span>
                                <span style="color: #666;">Total Analyzed</span>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ
            updateTrendChart(analyzedData);
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª
        function updateTrendChart(data) {
            const ctx = document.getElementById('trendChart');
            if (!ctx) return;
            
            // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
            const groupedData = {};
            data.forEach(f => {
                const date = f.date;
                if (!groupedData[date]) {
                    groupedData[date] = { positive: 0, negative: 0, neutral: 0 };
                }
                
                if (f.rating >= 4) groupedData[date].positive++;
                else if (f.rating <= 2) groupedData[date].negative++;
                else groupedData[date].neutral++;
            });
            
            const dates = Object.keys(groupedData).sort().slice(-7);
            const positiveData = dates.map(date => groupedData[date]?.positive || 0);
            const negativeData = dates.map(date => groupedData[date]?.negative || 0);
            
            // ØªØ¯Ù…ÙŠØ± Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¥Ø°Ø§ Ù…ÙˆØ¬ÙˆØ¯
            if (window.trendChartInstance) {
                window.trendChartInstance.destroy();
            }
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ø¬Ø¯ÙŠØ¯
            window.trendChartInstance = new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'Positive',
                            data: positiveData,
                            borderColor: '#27ae60',
                            backgroundColor: 'rgba(39, 174, 96, 0.1)',
                            fill: true,
                            tension: 0.3
                        },
                        {
                            label: 'Negative',
                            data: negativeData,
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            fill: true,
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        }

        // ===== UI Functions =====
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Update content if needed
            if (tabName === 'dashboard' || tabName === 'reports') {
                updateDashboard();
            }
            if (tabName === 'aiInsights') {
                setTimeout(updateAIDashboard, 100);
            }
        }

        function showAlert(message, type = 'info') {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert-banner ${type}`;
            alertDiv.innerHTML = `
                <span><i class="fas fa-info-circle"></i> ${message}</span>
                <button onclick="this.parentElement.remove()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
            `;
            
            document.querySelector('.feedback-container').prepend(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

        console.log('âœ… Feedback system with AI ready');
    </script>
</body>
</html>
